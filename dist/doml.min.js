/*!
  * Doml - a DOM constructor
  * copyright Stuart Malin 2011
  * https://github.com/zhami/doml
  * MIT License
  */
!function(a){var b,c,d,e;getEnv=function(){var b;b={global:undefined,isAMD:!1,isBrowser:!1,isModule:!1,isEnder:!1,hasRequire:!1},b.global=global=function(){return this}(),b.isAMD=Boolean(typeof define!="undefined"&&define.AMD),b.isBrowser=Boolean(typeof global.window!="undefined"),b.isEnder=Boolean(typeof a.ender!="undefined"),b.isModule=Boolean(typeof module!="undefined"&&module.exports),b.hasRequire=Boolean(typeof require=="function");return b},d=function(a){return Boolean(a&&Object.prototype.toString.apply(a)==="[object Array]")},e=function(a){return a&&a.nodeName&&a.nodeType==1},Element=function(a){if(!a)return null;this.document=a,this.element=null,this.allowTextNodes=!1,this.pendingFunc=null},Element.prototype=function(){var a,b,c;b=function(a,b){var c,d,e,f;e=b.split(";"),d=e.length;for(c=0;c<d;c+=1)f=e[c],f&&(f=/\s*([^:]+):\s*(.+)/.exec(f),f&&f.length===3&&(a.style[f[1]]=f[2]))},a=function(a){var c,d,e;e=function(a,c,d){switch(c){case"checked":case"selected":a[c]=Boolean(d);break;case"className":case"class":a.className=d;break;case"css":b(a,d);break;default:a.setAttribute(c,d)}},c=this.element;for(d in a)a.hasOwnProperty(d)&&e(c,d,a[d])},handleTag=function(a){this.element=this.document.createElement(a),this.allowTextNodes=Boolean(!/^input$/.test(a.toLowerCase()))},c=function(b){var f,g,h,i,j;if(j=this.pendingFunc)this.pendingFunc=null,b=j.call(this,b);j=d(b)?"array":typeof b,j==="object"&&e(b)&&(j="node");switch(j){case"node":this.element.appendChild(b);break;case"string":this.allowTextNodes&&this.element.appendChild(document.createTextNode(b));break;case"array":i=b[0];if(typeof i=="string")h=new Element(this.document),h.create.apply(h,b),h=h.getElement(),this.element.appendChild(h);else if(d(i)){g=b.length;for(f=0;f<g;f+=1)i=b[f],h=new Element(this.document),d(i)?(h.create.apply(h,i),h=h.getElement(),this.element.appendChild(h)):c.call(this,i)}else{g=b.length;for(f=0;f<g;f+=1)c.call(this,b[f])}break;case"object":a.call(this,b);break;case"function":this.pendingFunc=b}};return{create:function(){var a,b,d,e;b=Array.prototype.slice.call(arguments,0),e=b.length;if(e!==0&&typeof b[0]=="string"){handleTag.call(this,b[0]);for(d=1;d<e;d+=1)a=b[d],c.call(this,a)}},getElement:function(){return this.element}}}(),b=function(a){!a&&c.isBrowser&&(a=c.global.window.document),this.document=a,this.verbose=!1},b.prototype={create:function(){var a;if(arguments.length===1&&e(a=arguments[0]))return a.cloneNode(!0);a=new Element(this.document),a.create.apply(a,arguments);return a.getElement()},noConflict:function(){},setDocument:function(a){this.document=a},verbose:!1},c=getEnv();if(c.isEnder)module.exports=new b;else if(c.isBrowser)!function(a){var c=a.Doml;a.Doml=b,b.noConflict=function(){a.Doml=c;return b}}(a);else if(c.isModule)module.exports=b;else throw new Error("Doml: can not determine the environment!")}(this)