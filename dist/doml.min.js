/*!
  * Doml - a DOM constructor
  * copyright Stuart Malin 2011
  * https://github.com/zhami/doml
  * MIT License
  */
!function(a){var b,c,d,e;getEnv=function(){var b;b={global:undefined,isAMD:!1,isBrowser:!1,isModule:!1,isEnder:!1,hasRequire:!1},b.global=global=function(){return this}(),b.isAMD=Boolean(typeof define!="undefined"&&define.AMD),b.isBrowser=Boolean(typeof global.window!="undefined"),b.isEnder=Boolean(typeof a.ender!="undefined"),b.isModule=Boolean(typeof module!="undefined"&&module.exports),b.hasRequire=Boolean(typeof require=="function");return b},d=function(a){return Boolean(a&&Object.prototype.toString.apply(a)==="[object Array]")},e=function(a){return a&&a.nodeName&&a.nodeType==1},Element=function(a){if(!a)return null;this.document=a,this.element=null,this.allowTextNodes=!1,this.pendingFunc=null},Element.prototype=function(){var a,b;a=function(a){var b,c,d;d=function(a,b,c){switch(b){case"checked":case"selected":a[b]=Boolean(c);break;case"className":case"class":a.className=c;break;default:a.setAttribute(b,c)}},b=this.element;for(c in a)a.hasOwnProperty(c)&&d(b,c,a[c])},handleTag=function(a){this.element=this.document.createElement(a),this.allowTextNodes=Boolean(!/^input$/.test(a.toLowerCase()))},b=function(c){var f,g,h,i,j;if(j=this.pendingFunc)this.pendingFunc=null,c=j.call(this,c);j=d(c)?"array":typeof c,j==="object"&&e(c)&&(j="node");switch(j){case"node":this.element.appendChild(c);break;case"string":this.allowTextNodes&&this.element.appendChild(document.createTextNode(c));break;case"array":i=c[0];if(typeof i=="string")h=new Element(this.document),h.create.apply(h,c),h=h.getElement(),this.element.appendChild(h);else if(d(i)){g=c.length;for(f=0;f<g;f+=1)i=c[f],h=new Element(this.document),d(i)?(h.create.apply(h,i),h=h.getElement(),this.element.appendChild(h)):b.call(this,i)}else{g=c.length;for(f=0;f<g;f+=1)b.call(this,c[f])}break;case"object":a.call(this,c);break;case"function":this.pendingFunc=c}};return{create:function(){var a,c,d,e;c=Array.prototype.slice.call(arguments,0),e=c.length;if(e!==0&&typeof c[0]=="string"){handleTag.call(this,c[0]);for(d=1;d<e;d+=1)a=c[d],b.call(this,a)}},getElement:function(){return this.element}}}(),b=function(a){!a&&c.isBrowser&&(a=c.global.window.document),this.document=a,this.verbose=!1},b.prototype={create:function(){var a;if(arguments.length===1&&e(a=arguments[0]))return a.cloneNode(!0);a=new Element(this.document),a.create.apply(a,arguments);return a.getElement()},noConflict:function(){},setDocument:function(a){this.document=a},verbose:!1},c=getEnv();if(c.isEnder)module.exports=new b;else if(c.isBrowser)!function(a){var c=a.Doml;a.Doml=b,b.noConflict=function(){a.Doml=c;return b}}(a);else if(c.isModule)module.exports=b;else throw new Error("Doml: can not determine the environment!")}(this)